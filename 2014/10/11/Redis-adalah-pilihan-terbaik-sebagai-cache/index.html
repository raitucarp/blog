<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>Redis adalah pilihan terbaik sebagai cache | Log of Ribhararnus Pracutiar</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Redis adalah pilihan terbaik sebagai cache</h1><a id="logo" href="/">Log of Ribhararnus Pracutiar</a><p class="description">Discrete knowledge, infinite learning.</p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> Home</i></a><a href="/archives/"><i class="icon-archive"> Archive</i></a><a href="/about/"><i class="icon-archive"> about-me</i></a><a href="/contact/"><i class="icon-phone"> contact</i></a><a href="/portfolio/"><i> portfolio</i></a><a href="/atom.xml"><i class="icon-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">Redis adalah pilihan terbaik sebagai cache</h1><div class="post-meta">2014-10-11 | </div><span data-disqus-identifier="2014/10/11/Redis-adalah-pilihan-terbaik-sebagai-cache/" class="disqus-comment-count"></span><div class="post-content"><p>Beberapa waktu yang lalu, sekitar satu bulan yang lalu kalau tidak salah, website utama saya sangat lambat. Saya tidak tahu harus bagaimana, saya ingin mempercepat website saya.</p>
<p>Sebelum itu, saya melakukan refactor kode untuk website saya menjadi rapi, saya menaikkan pool maxSocket untuk melakukan koneksi ke luar. (ya memang website saya adalah jenis scraping). Memisahkan router, urusan bisnis dan views. Mungkin lebih baik tidak saya ceritakan disini karena beda tema, mungkin di kesempatan yang lain.</p>
<p>Tekhnik scraping yang saya gunakan adalah menggunakan beberapa kemungkinan, jika suatu endpoint url dari api yang hendak saya scrape tidak ada result, maka saya mengubah query nya sedemikian rupa agar mendapatkan result.</p>
<p>Bisa ditebak, request time nya akan sangat tinggi. Artinya akan memakan waktu lama sebelum dikirimkan kepada user.<br><a id="more"></a></p>
<p>Beberapa ide yang muncul adalah melakukan caching. Kenapa caching? Karena agar ketika user request data, applikasi web saya tidak selalu request ke endpoint url tersebut melainkan melihat cache terlebih dahulu, jika tersedia, maka saya menampilkan data dari cache tersebut. Jika tidak maka akan request.</p>
<p>Waktu itu saya ingin melakukan caching dengan pendekatan yang saya lakukan adalah menulis file json ke disk menggunakan fs.write() dan fs.read(). Hmm sebenarnya ide bodoh, karena bisa saja saya menggunakan database untuk menangani itu, tapi ketika itu saya juga menimbang masak-masak, karena saya saat ini menggunakan mongodb, sebuah nosql database, mungkin saya jg harus memperhatikan performa query time, singkatnya, sebenarnya ide yang sebelumnya muncul adalah membuat cache data hasil request, menulisnya ke dalam database. Namun, karena alasan performance saya enggan melakukan itu. karena data perhari bisa lebih dari 1 Gbyte data (kalau saya tidak salah)</p>
<h3 id="Perkenalkan_Redis"><a href="#Perkenalkan_Redis" class="headerlink" title="Perkenalkan Redis"></a>Perkenalkan Redis</h3><p><a href="http://3.bp.blogspot.com/-WoBqzRDLvUI/VDhi8Wu-eMI/AAAAAAAACus/VfyvI-oe504/s1600/200px-Redis_Logo.svg.png" target="_blank" rel="external"><img src="http://3.bp.blogspot.com/-WoBqzRDLvUI/VDhi8Wu-eMI/AAAAAAAACus/VfyvI-oe504/s1600/200px-Redis_Logo.svg.png" alt=""></a></p>
<p>Redis adalah sejenis database no-sql, artinya dia tidak menggunakan bahasa query seperti sql. Selain itu ia adalah key-value store, ia beda dengan mongodb nosql tetapi document store (artinya document berbentuk json yang disimpan).</p>
<p>Karena key-value store adalah paling primitif dalam penyimpanan, redis ini sangat powerful. Key-value itu jika dalam pemrograman seperti membuat variable, dalam matematika seperti penggunaan sama dengan, atau dalam bahasa itu seperti nilai, oke misal nya adalah “nama orang = ribhararnus”, “hobi=coding”, “makanan favorit=bebek goreng”.</p>
<p>Kita ambil contoh “makanan favorit=bebek goreng”, maka makanan adalah sebuah key, dan bebek goreng adalah sebuah value, dalam redis keduanya berbentuk string, tetapi selain string bisa juga berbentuk integer atau bit.</p>
<p>Tidak hanya key-value sebenarnya, tetapi redis juga mendukung hash, set (operasi seperti union intersection dsb), set yang sudah diurutkan, dan lain sebagainya.</p>
<p>Fitur lainnya misal pub-sub. Oh ya yang paling saya suka adalah adanya expire, jadi kita bisa membuat data kita expire atau hilang otomatis dihapus oleh redis. Biasanya cocok untuk membuat session, dan tentu saja dalam kasus saya adalah membuat cache dengan memanfaatkan expire tersebut.</p>
<p>Contoh sederhana redis:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set nama &#34;ribhararnus pracutiar&#34; ex 30</span><br></pre></td></tr></table></figure>
<p>nama disitu adalah key, “ribhararnus pracutiar” adalah sebuah value berbentuk “string”, ex adalah expire, atau kapan data akan berakhir/kadaluwarsa selama 30 detik, 30 apa itu? bisa ditebak sendiri</p>
<p>selain value yang berbentuk string, redis juga mengijinkan key berbentuk string misal</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set &#34;makanan favorit&#34; &#34;bebek goreng&#34; ex 10&#10;OK</span><br></pre></td></tr></table></figure>
<p>untuk mendapatkan nya cukup dengan</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get &#34;makanan favorit&#34;&#10;&#34;bebek goreng&#34;</span><br></pre></td></tr></table></figure>
<p>baris pertama saya ingin mencari key dengan nama “makanan favorit”, dan ketemu, ternyata isinya adalah “bebek goreng”</p>
<p>Bukan hanya itu, kita juga bisa membuat semacam folder atau struktur ketika menyimpan data misal</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mset ribhararnus:hobi &#34;coding&#34; &#34;ribhararnus:makanan favorit&#34; &#34;bebek goreng&#34;</span><br></pre></td></tr></table></figure>
<p>mset adalah multiple set, artinya kita setel beberapa key-value secara bersamaan, syntaxnya seperti:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mset key1 value1 key2 value2 ... n</span><br></pre></td></tr></table></figure>
<p>Untuk mendapatkannya juga sama<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mget key1 key2 key3 ...&#10;`</span><br></pre></td></tr></table></figure></p>
<p>Itu hanya beberapa fitur, banyak sekali command yang bisa kita pelajari, bisa membaca lengkap disini&nbsp;<a href="http://redis.io/commands#" target="_blank" rel="external">http://redis.io/commands#</a></p>
<p><a href="http://2.bp.blogspot.com/-vvSBClZqBnI/VDhnrV7OoDI/AAAAAAAACu4/uXiY2HEZvnE/s1600/redis.jpg" target="_blank" rel="external"><img src="http://2.bp.blogspot.com/-vvSBClZqBnI/VDhnrV7OoDI/AAAAAAAACu4/uXiY2HEZvnE/s1600/redis.jpg" alt=""></a><br>tampilan redis-server 32 bit di windows</p>
<p>Saya tidak akan membahas detil mengenai redis dan command lengkapnya disini, mungkin lain kali akan buatkan tutorial step by step dari installasi sampai penggunaannya di aplikasi, penggunaan redis client untuk node.js atau php, dan seterusnya, tetapi di lain kesempatan.</p>
<p>Fokus saya disini adalah, redis saya gunakan sebagai cache, yaitu data yang saya peroleh dari hasil scraping yang biasanya memakan waktu yaitu request dari server menuju endpoint url, dan diteruskan ke user setelah dapat data, maka dengan redis saya menyimpan data sementara dengan menggunakan expire (akan terdelete otomatis oleh redis), yang pada nantinya server tidak usah melakukan request berulang-ulang selama ada data cache di redis.</p>
<p>Ok. sekian.</p>
</div><div class="tags"><a href="/tags/dev/">dev</a></div><div class="post-nav"><a href="/2015/07/11/Jurnal-Produktivitas/" class="pre"><i class="icon-previous">Jurnal Produktivitas</i></a><a href="/2014/10/08/Hidup dalam percepatan tekhnologi/" class="next">Hidup dalam percepatan tekhnologi<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'raitucarp';
var disqus_identifier = '2014/10/11/Redis-adalah-pilihan-terbaik-sebagai-cache/';
var disqus_title = 'Redis adalah pilihan terbaik sebagai cache';
var disqus_url = 'http://pracutiar.ribhararn.us/2014/10/11/Redis-adalah-pilihan-terbaik-sebagai-cache/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//raitucarp.disqus.com/count.js" async="async"></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://pracutiar.ribhararn.us"/></form></div><div class="widget"><div class="widget-title">Categories</div></div><div class="widget"><div class="widget-title">Tags</div><div class="tagcloud"><a href="/tags/writing/" style="font-size: 15px;">writing</a> <a href="/tags/id/" style="font-size: 15px;">id</a> <a href="/tags/produktivitas/" style="font-size: 15px;">produktivitas</a> <a href="/tags/dev/" style="font-size: 15px;">dev</a> <a href="/tags/en/" style="font-size: 15px;">en</a> <a href="/tags/journal/" style="font-size: 15px;">journal</a> <a href="/tags/jurnal/" style="font-size: 15px;">jurnal</a> <a href="/tags/log/" style="font-size: 15px;">log</a> <a href="/tags/tantangan/" style="font-size: 15px;">tantangan</a> <a href="/tags/blogging/" style="font-size: 15px;">blogging</a> <a href="/tags/info/" style="font-size: 15px;">info</a> <a href="/tags/haiku/" style="font-size: 15px;">haiku</a></div></div><div class="widget"><div class="widget-title">Recent</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2015/12/29/Migration-to-Github-Pages/">Migration to Github Pages</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/16/Tarik-ulur-adalah-sebuah-akibat-yang-harus-diterima-produktif-atau-anak/">Tarik-ulur adalah sebuah akibat yang harus diterima, produktif atau anak.</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/10/Jurnal-Produktivitas-hari-ke-lima-dan-serterusnya/">Jurnal Produktivitas hari ke-lima dan serterusnya</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/01/Haiku-4-Kacau-semuanya/">Haiku #4: Kacau semuanya</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/01/Jurnal-Produktivitas-1-2-3-4/">Jurnal Produktivitas 1, 2, 3,  4</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/01/Haiku-3-Mencari-Ritme/">Haiku #3: Mencari Ritme</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/01/Keluar-dari-zona-nyaman-Semua-berjalan-lumayan-baik/">Keluar dari zona nyaman. Semua berjalan lumayan baik</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/30/Haiku-2-Terbiasa/">Haiku #2: Terbiasa</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/29/Pekerjaan-dalam-dunia-tanpa-uang/">Pekerjaan dalam dunia tanpa uang</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/29/Haiku-1-Hari-baru/">Haiku #1: Hari baru</a></li></ul></div><div class="widget"><div class="widget-title">Recent Comments</div><script type="text/javascript" src="//raitucarp.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">Log of Ribhararnus Pracutiar.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"></div></body></html>